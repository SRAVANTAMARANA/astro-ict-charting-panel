<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lightweight Charts - Errorless Example</title>
  <script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
  <style>
    html, body { height: 100%; margin: 0; }
    #chart { width: 100vw; height: 90vh; }
  </style>
</head>
<body>
  <div id="chart"></div>
  <script>
    // Wait for DOM
    document.addEventListener('DOMContentLoaded', function() {
      // Ensure library and method available
      const ChartLib = window.LightweightCharts;
      if (!ChartLib || typeof ChartLib.createChart !== 'function') {
        alert('Lightweight Charts library not loaded!');
        return;
      }

      // Create chart
      const chart = ChartLib.createChart(document.getElementById('chart'), {
        width: window.innerWidth,
        height: window.innerHeight * 0.9,
        layout: { background: { color: '#fff' }, textColor: '#222' }
      });

      // Add candlestick series
      const candleSeries = chart.addCandlestickSeries({
        upColor: '#26a69a',
        downColor: '#ef5350',
        borderVisible: false,
        wickUpColor: '#26a69a',
        wickDownColor: '#ef5350'
      });

      // Set chart data (example demo data)
      candleSeries.setData([
        { time: '2024-09-18', open: 100, high: 110, low: 90, close: 105 },
        { time: '2024-09-19', open: 105, high: 115, low: 95, close: 100 },
        { time: '2024-09-20', open: 100, high: 108, low: 98, close: 104 },
        { time: '2024-09-21', open: 104, high: 112, low: 101, close: 108 }
      ]);

      // Optional: Make responsive
      window.addEventListener('resize', function() {
        chart.applyOptions({ width: window.innerWidth, height: window.innerHeight * 0.9 });
      });
    });
  </script>
</body>
</html>
